import{r as m,j as e,S as j,ah as N,ai as v}from"./index-DOrSdxar.js";function b(){const l=String(N).trim();if(!l)return"";try{const n=new URL(l);return n.pathname=n.pathname.replace(/\/api\/?$/i,"/"),n.search="",n.hash="",n.toString().replace(/\/$/,"")}catch{return""}}function f(l){return/^[0-9a-f]{32}$/i.test(String(l||"").trim())}function g(l){return/^https?:\/\//i.test(String(l||"").trim())}function k(l){return/^(drive|docs)\.google\.com\//i.test(String(l||"").trim())}function C(l,n){const a=String(l||"").trim();if(!a)return null;if(g(a))return a;if(k(a))return`https://${a}`;const r=b();if(f(a)&&r){const i=String(n||"").trim();return i?`${r}/files/${encodeURIComponent(a)}?token=${encodeURIComponent(i)}`:null}return`https://drive.google.com/file/d/${encodeURIComponent(a)}/preview`}function y({open:l,onClose:n,cvFileId:a,token:r,candidate:s}){const[i,c]=m.useState(!0),[d,o]=m.useState(!1);if(m.useEffect(()=>{l&&(c(!0),o(!1))},[l,a]),!l)return null;const t=C(a,r),u=()=>{c(!1)},x=()=>{c(!1),o(!0)},h=()=>{t&&window.open(t,"_blank","noopener,noreferrer")};return e.jsx("div",{className:"cv-modal-overlay",onClick:n,children:e.jsxs("div",{className:"cv-modal-container",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"cv-modal-header",children:[e.jsxs("div",{className:"cv-modal-title",children:[e.jsx("span",{className:"cv-modal-icon",children:"ğŸ“„"}),e.jsxs("div",{children:[e.jsx("h3",{children:"CV Preview"}),s&&e.jsx("span",{className:"cv-modal-candidate",children:s.fullName||s.candidateId})]})]}),e.jsxs("div",{className:"cv-modal-actions",children:[e.jsx("button",{type:"button",className:"button",onClick:h,title:"Open in new tab",children:"â†— New Tab"}),e.jsx("button",{type:"button",className:"cv-modal-close",onClick:n,title:"Close",children:"âœ•"})]})]}),s&&e.jsxs("div",{className:"cv-modal-details",children:[e.jsxs("div",{className:"cv-modal-details-grid",children:[s.jobRole&&e.jsxs("div",{className:"cv-modal-detail",children:[e.jsx("span",{className:"cv-modal-detail-label",children:"Position"}),e.jsx("span",{className:"cv-modal-detail-value",children:s.jobRole})]}),s.source&&e.jsxs("div",{className:"cv-modal-detail",children:[e.jsx("span",{className:"cv-modal-detail-label",children:"Source"}),e.jsx("span",{className:"cv-modal-detail-value",children:s.source})]}),s.phone&&e.jsxs("div",{className:"cv-modal-detail",children:[e.jsx("span",{className:"cv-modal-detail-label",children:"Phone"}),e.jsx("span",{className:"cv-modal-detail-value",children:s.phone})]}),s.email&&e.jsxs("div",{className:"cv-modal-detail",children:[e.jsx("span",{className:"cv-modal-detail-label",children:"Email"}),e.jsx("span",{className:"cv-modal-detail-value",children:s.email})]}),s.experience&&e.jsxs("div",{className:"cv-modal-detail",children:[e.jsx("span",{className:"cv-modal-detail-label",children:"Experience"}),e.jsx("span",{className:"cv-modal-detail-value",children:s.experience})]}),s.currentSalary&&e.jsxs("div",{className:"cv-modal-detail",children:[e.jsx("span",{className:"cv-modal-detail-label",children:"Current Salary"}),e.jsx("span",{className:"cv-modal-detail-value",children:s.currentSalary})]}),s.expectedSalary&&e.jsxs("div",{className:"cv-modal-detail",children:[e.jsx("span",{className:"cv-modal-detail-label",children:"Expected Salary"}),e.jsx("span",{className:"cv-modal-detail-value",children:s.expectedSalary})]}),s.noticePeriod&&e.jsxs("div",{className:"cv-modal-detail",children:[e.jsx("span",{className:"cv-modal-detail-label",children:"Notice Period"}),e.jsx("span",{className:"cv-modal-detail-value",children:s.noticePeriod})]})]}),(s.onlineTestScore||s.preInterviewMarks||s.inPersonMarks)&&e.jsxs("div",{className:"cv-modal-scores",children:[e.jsx("span",{className:"cv-modal-detail-label",children:"Scores"}),e.jsxs("div",{className:"cv-modal-scores-badges",children:[s.onlineTestScore!=null&&e.jsxs("span",{className:"badge",children:["Online Test: ",s.onlineTestScore]}),s.preInterviewMarks!=null&&e.jsxs("span",{className:"badge",children:["Pre-interview: ",s.preInterviewMarks]}),s.inPersonMarks!=null&&e.jsxs("span",{className:"badge",style:{background:"#22c55e",color:"#fff"},children:["In-person: ",s.inPersonMarks,"/10"]})]})]})]}),e.jsxs("div",{className:"cv-modal-body",children:[i&&e.jsxs("div",{className:"cv-modal-loading",children:[e.jsx(j,{size:32}),e.jsx("span",{children:"Loading CV..."})]}),d&&e.jsxs("div",{className:"cv-modal-error",children:[e.jsx("span",{className:"cv-modal-error-icon",children:"âš ï¸"}),e.jsx("span",{children:"Unable to load CV preview"}),e.jsx("button",{className:"button",onClick:h,children:"Try opening in new tab"})]}),t?e.jsx("iframe",{src:t,className:"cv-modal-iframe",onLoad:u,onError:x,title:"CV Preview",style:{display:i||d?"none":"block"}}):e.jsxs("div",{className:"cv-modal-error",children:[e.jsx("span",{className:"cv-modal-error-icon",children:"ğŸ“„"}),e.jsx("span",{children:"CV not available"})]})]})]})})}function P({selectedCount:l=0,onClearSelection:n,actions:a=[],loading:r=!1}){return l===0?null:e.jsx("div",{className:"bulk-action-bar",children:e.jsxs("div",{className:"bulk-action-bar-inner",children:[e.jsxs("div",{className:"bulk-action-info",children:[e.jsx("span",{className:"bulk-action-count",children:l}),e.jsx("span",{className:"bulk-action-label",children:"selected"}),e.jsx("button",{type:"button",className:"bulk-action-clear",onClick:n,disabled:r,children:"âœ• Clear"})]}),e.jsx("div",{className:"bulk-action-buttons",children:a.map((s,i)=>e.jsxs("button",{type:"button",className:`button ${s.variant||""}`,onClick:s.onClick,disabled:s.disabled||r,title:s.title,children:[s.icon?e.jsx("span",{style:{marginRight:6},children:s.icon}):null,s.label]},i))})]})})}function w({open:l,title:n,current:a,total:r,errors:s=[],onClose:i}){if(!l)return null;const c=r>0?Math.round(a/r*100):0,d=a>=r;return e.jsx("div",{className:"modal-overlay",onClick:d?i:void 0,children:e.jsxs("div",{className:"modal-content bulk-progress-modal",onClick:o=>o.stopPropagation(),children:[e.jsx("h3",{style:{marginTop:0,marginBottom:16},children:n||"Processing..."}),e.jsx("div",{className:"bulk-progress-bar-container",children:e.jsx("div",{className:"bulk-progress-bar",style:{width:`${c}%`}})}),e.jsxs("div",{className:"bulk-progress-text",children:[a," / ",r," (",c,"%)"]}),s.length>0&&e.jsxs("div",{className:"bulk-errors",children:[e.jsxs("div",{className:"bulk-errors-title",children:["âš ï¸ ",s.length," errors:"]}),e.jsxs("div",{className:"bulk-errors-list",children:[s.slice(0,5).map((o,t)=>e.jsxs("div",{className:"bulk-error-item",children:[o.file||o.id,": ",o.message]},t)),s.length>5&&e.jsxs("div",{className:"bulk-error-item",children:["...and ",s.length-5," more"]})]})]}),d&&e.jsx("div",{style:{marginTop:16,textAlign:"right"},children:e.jsx("button",{className:"button primary",onClick:i,children:"Close"})})]})})}function I({checked:l,indeterminate:n,onChange:a,disabled:r,label:s="Select All"}){const i=v.useRef(null);return v.useEffect(()=>{i.current&&(i.current.indeterminate=n)},[n]),e.jsxs("label",{className:"bulk-select-all",children:[e.jsx("input",{ref:i,type:"checkbox",checked:l,onChange:c=>a(c.target.checked),disabled:r}),e.jsx("span",{children:s})]})}export{w as B,y as C,I as S,P as a};
