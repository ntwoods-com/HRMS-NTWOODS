import{j as s,r as p}from"./index-grL27em3.js";import{o as u}from"./files-CjotXup9.js";function b(n){const r=String(n).toUpperCase();return r==="COMPLETED"?{bg:"#22c55e",fg:"#fff"}:r==="IN_PROGRESS"?{bg:"#3b82f6",fg:"#fff"}:r==="OVERDUE"?{bg:"#ef4444",fg:"#fff"}:{bg:"#f59e0b",fg:"#fff"}}function x({status:n}){const r=String(n||"").toUpperCase()||"PENDING",l=b(r),t=r==="IN_PROGRESS"?"In-Progress":r.charAt(0)+r.slice(1).toLowerCase();return s.jsx("span",{className:"badge",style:{background:l.bg,color:l.fg},children:t})}function h(n){if(!n)return"-";const r=n instanceof Date?n:new Date(n);return Number.isNaN(r.getTime())?String(n):r.toLocaleString()}function y(n){if(!Number.isFinite(n)||n<0)return"-";const r=Math.floor(n/1e3),l=Math.floor(r/3600),t=Math.floor(r%3600/60);return`${l}h ${String(t).padStart(2,"0")}m`}function N({item:n,token:r,canUpdate:l,onStart:t,onComplete:d}){const c=String((n==null?void 0:n.status)||"").toUpperCase(),i=p.useMemo(()=>(Array.isArray(n==null?void 0:n.documents)?n.documents:[]).map(o=>String(o||"").trim()).filter(Boolean),[n]),e=p.useMemo(()=>(Array.isArray(n==null?void 0:n.video_links)?n.video_links:n!=null&&n.video_link?[n.video_link]:[]).map(o=>String(o||"").trim()).filter(Boolean),[n]),g=p.useMemo(()=>{const a=n!=null&&n.start_time?new Date(n.start_time):null,o=n!=null&&n.completion_time?new Date(n.completion_time):null;return a&&!Number.isNaN(a.getTime())&&o&&!Number.isNaN(o.getTime())?y(o.getTime()-a.getTime()):"-"},[n]),f=c==="COMPLETED"?"4px solid #22c55e":c==="OVERDUE"?"4px solid #ef4444":c==="IN_PROGRESS"?"4px solid #3b82f6":"4px solid #f59e0b";return s.jsxs("div",{className:"card",style:{background:"#fff",border:"1px solid var(--gray-200)",borderLeft:f},children:[s.jsxs("div",{className:"row",style:{gap:10,alignItems:"flex-start",flexWrap:"wrap"},children:[s.jsxs("div",{style:{flex:1,minWidth:220},children:[s.jsx("div",{style:{fontWeight:700},children:(n==null?void 0:n.training_name)||(n==null?void 0:n.training_id)}),s.jsx("div",{className:"small",style:{color:"var(--gray-500)",marginTop:2},children:(n==null?void 0:n.department)||"-"}),n!=null&&n.description?s.jsx("div",{className:"small",style:{marginTop:8,whiteSpace:"pre-wrap"},children:n.description}):null,s.jsxs("div",{style:{marginTop:10,display:"flex",gap:8,flexWrap:"wrap"},children:[s.jsx(x,{status:n==null?void 0:n.status}),s.jsxs("span",{className:"badge",children:["Due: ",h(n==null?void 0:n.due_date)]}),s.jsxs("span",{className:"badge",children:["Time: ",g]})]})]}),s.jsxs("div",{className:"action-grid",style:{minWidth:220},children:[e.length===1?s.jsx("button",{className:"button",type:"button",onClick:()=>window.open(e[0],"_blank","noopener,noreferrer"),children:"Open Video"}):e.length>1?s.jsx("button",{className:"button",type:"button",onClick:()=>window.open(e[0],"_blank","noopener,noreferrer"),children:"Open Video 1"}):null,i.length?s.jsx("button",{className:"button",type:"button",onClick:()=>u(i[0],r),children:"Open Document"}):null,s.jsx("button",{className:"button",type:"button",disabled:!l,onClick:()=>t&&t(n),children:c==="IN_PROGRESS"?"Resume":"Start"}),s.jsx("button",{className:"button primary",type:"button",disabled:!l,onClick:()=>d&&d(n),children:"Mark Complete"})]})]}),i.length>1?s.jsxs("div",{style:{marginTop:10},children:[s.jsx("div",{className:"small",style:{fontWeight:700,marginBottom:6},children:"Documents"}),s.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:i.map(a=>s.jsx("button",{className:"button",type:"button",onClick:()=>u(a,r),children:"Open"},a))})]}):null,e.length>1?s.jsxs("div",{style:{marginTop:10},children:[s.jsx("div",{className:"small",style:{fontWeight:700,marginBottom:6},children:"Videos"}),s.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:e.map((a,o)=>s.jsxs("button",{className:"button",type:"button",onClick:()=>window.open(a,"_blank","noopener,noreferrer"),children:["Open ",o+1]},`${o}:${a}`))})]}):null]})}function _({items:n,token:r,loading:l,canUpdate:t,onStart:d,onComplete:c}){const i=Array.isArray(n)?n:[];return l?s.jsx("div",{className:"small",children:"Loading trainingsâ€¦"}):i.length?s.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10},children:i.map(e=>s.jsx(N,{item:e,token:r,canUpdate:!!t,onStart:d,onComplete:c},e.assigned_id||`${e.candidate_id}:${e.training_id}`))}):s.jsx("div",{className:"small",children:"No trainings assigned."})}export{_ as T};
